/*! The-Noun-Project 2014-09-15 */
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;window.noun||(window.noun={}),C=window.noun,b=$("body"),window.navigator&&"preview"===window.navigator.loadPurpose&&(window.location.href=window.location.origin+"/topsites-preview/"),K=function(){return K=window.location.href.split("/")},C.url_to_array=K(),z=function(){var a;return a=b.data("authentication"),a===!0?!0:!1},C.is_authenticed=z(),o=function(){return{status:void 0,url:void 0,page:1,count:1,limit:void 0,offset:0,pageLimit:72,template:$("#handlebar-template"),start_paginate_when_in_view:void 0,featurette_html:void 0,featurette_count:0,append_container:void 0,on_finish:void 0,finished:void 0,exhausted:!1,scroll_offset:void 0,init:function(a,b,c){"url = URL to ajax\nstart_paginate_when_in_view = where to start pagination\nappend_container = container to append to";var d,e,f;return C.icon_list.start_paginate_when_in_view=b,f=void 0===c?$("#results"):c.parent(),this.url=a,C.icon_list.status="loading",e=this.template.data("loading"),f.append(e),void 0===c&&(c=$("#results ol")),this.scroll_offset=void 0===this.scroll_offset?"110%":this.scroll_offset,void 0===this.limit?(C.icon_list.scroll(b,c),C.icon_list.append(c,this.on_finish)):C.icon_list.append(c,this.on_finish,d=this.limit)},scroll:function(a,b){return this.status="scrolling",a.waypoint(function(){return C.icon_list.finished===!0&&C.icon_list.append(b,C.icon_list.on_finish),C.icon_list.exhausted!==!0?$(".loading").removeClass("hidden"):void 0},{offset:C.icon_list.scroll_offset})},append:function(a,b,c){var d,e,f,g,h,i,j,k;return C.icon_list.finished=!1,k=this.template,d=C.icon_list.pageLimit,f=C.icon_list.page,e=C.icon_list.offset,h={page:f,limit:d,offset:e},i=$.param(h),this.page=f,g=-1===C.icon_list.url.indexOf("/collections")?C.icon_list.url+"?"+i:C.icon_list.url+"&"+i,j="down","down"===j?C.icon_list.page+=1:"up"===j&&(C.icon_list.page+=-1),$.getJSON(g,function(d){var e,f,g,h,i,j,l,m;for(i=d,l=k.html(),f=Handlebars.compile(l),m=i.uploads?{objects:i.uploads}:i.favorites?{objects:i.favorites}:i.downloads?{objects:i.downloads}:i.purchases?{objects:i.purchases}:{objects:i},0===m.objects.length&&($("#results .loading").addClass("hidden"),void 0!==C.icon_list.ajax_point&&C.icon_list.ajax_point.waypoint("destroy")),e=f(m),h=e.split('class="icon"'),g=0,j="";g<h.length;)g!==h.length-1&&(h[g]+="data-page='"+C.icon_list.count+"'"+"class='icon'"),j+=h[g],g++;return C.icon_list.count=C.icon_list.count+1,$("#results .loading").addClass("hidden"),C.icon_list.status="loaded",void 0!==C.icon_list.featurette&&0===C.icon_list.count%3&&(void 0!==C.icon_list.featurette[C.icon_list.featurette_count]?(j+=C.icon_list.featurette[C.icon_list.featurette_count],C.icon_list.featurette_count+=1):C.icon_list.featurette_count=0),void 0===a?$("#results ol").append(j):a.append(j),void 0!==C.icon_list.on_finish&&C.icon_list.on_finish(),$.waypoints("refresh"),void 0===c&&C.icon_list.page<2&&C.icon_list.append(a,b),C.icon_list.finished=!0}).fail(function(){var a,b;return a=C.url_to_array,b=a[3],$(".no-more-icons").length?void 0:(C.icon_list.append_container.parent().find($(".loading")).addClass("hidden"),$("#uploads .loading").addClass("hidden"),C.icon_list.callback(),C.icon_list.exhausted=!0,C.icon_list.page=7,C.icon_list.status="Error: No more icons for this term")})},featurette:function(a,b){var c,d,e,f,g,h;g=0,h=0,d=[],f=void 0;for(c in a)a.hasOwnProperty(c)&&(e="//"+C.url_to_array[2]+"/featurette/?collection_name="+a[g].collection_title+"&collection_designer="+a[g].collection_designer+"&collection_url="+a[g].collection_slug+"&collection_id="+a[g].collection_slug+"&featured_designer="+a[g].designer_username,g++,$.get(e,function(a){return h++,d.push("<section id='featurette-"+h+"' class='featurette-container'>"+a+"</section>"),void 0!==typeof d&&d.length>b-1?f(d):void 0}));return f=function(a){return C.icon_list.featurette=a}},callback:function(){return"0"},fallbackIcon:function(a){return a.addClass("loading-new").attr("src","/static/img/fallback-icon.svg")},error:function(a,b){var c,d,e;return a.addClass("loading-new").attr("src","/static/img/fallback-icon.svg"),c=$('.list-of-icons li[data-id="'+b+'"]').data("page"),d=$("h1.term").html(),e="//"+C.url_to_array[2]+"/json_reload_list/"+d+"?page="+c,$.getJSON(e,function(c){"0";return $.map(c,function(c){return $('li[data-id="'+c.id+'"]').data("icon_url",c.icon_url),parseInt(c.id)===parseInt(b)?(a.attr("src",c.icon_url),a.removeClass("hidden").removeClass("loading-new")):void 0})})}}},C.icon_list=o(),m=function(){function a(a,c,k,l,m){var n,o,p;p=this,a=$(a),h=a.parent(),j=c,f=k,g=void 0!==m?m:50,void 0!==l&&(i=l),n=Backbone.Model.extend({defaults:{loading:i.data("loading"),error:"/static/img/fallback-icon.svg",id:0,term_slug:"None",preview_url:"None"},idAttribute:"cid"}),o=Backbone.Collection.extend({model:n,url:function(){return c}}),e=new o,d=new n,b=Backbone.View.extend({el:a,initialize:function(){this.render()},render:function(){var a,b,c,f,g,h,j;for(b=Handlebars.compile(i.html()),c=[],j=e.models,g=0,h=j.length;h>g;g++)d=j[g],c.push(d.attributes);f={objects:c},a=b(f),$(this.el).append(a),void 0!==p.on_finish&&p.on_finish()}}),h.append(d.attributes.loading),this.scroll()}var b,c,d,e,f,g,h,i,j;return c=void 0,h=void 0,e=void 0,d=void 0,f=void 0,g=void 0,b=void 0,j=void 0,i=$("#handlebar-template"),a.prototype.on_finish=void 0,a.prototype.scroll=function(){var a,c,d;return d=!1,a=$("#footer"),c=a.length>0?a:$("#logout-form"),c.waypoint(function(){return d===!1?($(".loading").removeClass("hidden"),e.fetch({data:{page:f,limit:g},success:function(){var a;return f+=1,a=new b,$(".loading").addClass("hidden"),$.waypoints("refresh")},error:function(){return $(".loading").addClass("hidden"),d=!0}})):void 0},{offset:"110%"})},a}(),C.Backbone_Icon_List=m,p=function(){return{element:'<div class="modal" data-type="" data-style=""></div>',status:void 0,authenticate:void 0,action:location.href.split("?action="),init:function(a,c,d,e,f,g){var h,i,j,k,l,m,n,o;switch(o="//"+C.url_to_array[2]+"/modals/"+a.type,m=$("[data-type='"+a.type+"']"),this.status="loading",i=function(c,d,f,g){if(C.modal.authenticate===!0){if(c.data("authenticate")===!1?(d.addClass("visible"),d.removeClass("hidden"),"full-blur"===d.data("style")&&b.addClass("blur"),this.status="loading",void 0!==e&&e(f)):(d=$(".login-signup-modal"),d.addClass("visible"),d.removeClass("hidden"),this.status="loading"),void 0!==g)return C.share_element=$(g)}else if(void 0!==g&&(C.share_element=$(g)),d.attr("data-type",a.type),d.addClass("visible"),d.removeClass("hidden"),"full-blur"===a.style&&(d.attr("data-style",a.style),b.addClass("blur")),this.status="loading",void 0!==e)return e(f)},c.attr("data-authenticate",a.authenticate),m.attr("data-type",a.type),m.attr("data-style",a.style),a.type){case"multi-function":m.removeClass("hidden"),j=m.find("[data-show]"),j.addClass("hidden"),j.removeClass("visible"),n=$("[data-show='"+a.data_element+"']"),n.removeClass("hidden"),n.addClass("visible")}switch(d){case"click":c.on(d,g,function(){var a,b;return b=$(this).attr("id"),$("body#term-detail").length>0||$("body#collaborative-collection").length>0?i(c,m,b):i(c,m,b,this),a="?action="+$("#"+b).data("action"),$(".login-signup-modal input[name=next]").val("/"+C.url_to_array[3]+"/"+C.url_to_array[4]+"/"+C.url_to_array[5]+a)});break;case"interval":switch(a.type){case"loading":l='<div class="modal loading-modal visible" data-type="loading" data-style="">                                        <div class="container row">                                            <div class="loading clearfix">                                                <div class="dot dot1"></div>                                                <div class="dot dot2"></div>                                                <div class="dot dot3"></div>                                                <div class="dot dot4"></div>                                            </div>                                        </div>                                    </div>',c.append(l),k=$(".loading-modal"),k.attr("data-style",a.style),$("body").addClass("blur")}break;case"auto-initialize":i(c,m)}return void 0!==C.modal.action[1]&&c.data("authenticate")===!0&&(a.type=C.is_authenticed===!0?"download":"login-signup",m=$(".modal."+a.type+"-modal"),m.removeClass("hidden"),i(void 0,m),C.modal.action[1]=void 0),C.is_authenticed===!1&&void 0===C.modal.authenticate?(a.type="login-signup",a.style="full-black",h=$(".modal."+a.type+"-modal"),this.status="loading",C.modal.authenticate=!0,this.status="loaded",h.attr("data-type",a.type),h.attr("data-style",a.style)):void 0},dismiss:function(){var a,b;return a=$(".modal"),a.addClass("hidden"),a.removeClass("visible"),$("body").removeClass("blur"),"function"==typeof(b=C.modal).reset_download&&b.reset_download(),$("#information-modal").length>0?($("#information-modal").removeClass("visible"),setTimeout(function(){return $("#information-modal").remove()},100)):void 0}}},C.modal=p(),n=function(){function a(){}var b,c;return c={},b={},a.prototype.drag_end=void 0,a.prototype.create_list=function(a){return a.sortable({update:function(){return void 0!==C.drag_and_drop_list.drag_end?C.drag_and_drop_list.drag_end():void 0}}),a.disableSelection()},a}(),C.drag_and_drop_list=new n,C.loading_markup='<div class="loading clearfix"><div class="dot dot1"></div><div class="dot dot2"></div><div class="dot dot3"></div><div class="dot dot4"></div></div>',$("#email-updates").submit(function(a){return a.preventDefault(),$.post(this.action,$(this).serialize()).done(function(b){return b.success&&(a.preventDefault(),$("#email-updates input#EMAIL").val(""),$("#email-updates label").addClass("ui_heart email-added"),$("#email-updates label").text("Thanks for joining the mailing list! Please check your email to confirm subscription.")),b.alreadySubscribed?(a.preventDefault(),$("#email-updates input#EMAIL").val(""),$("#email-updates label").addClass("ui_heart email-added"),$("#email-updates label").text("You're already subscribed!")):(a.preventDefault(),$("#email-updates label").addClass("shake"),$("#email-updates label").text(b.message))})}),$("#email-updates input#EMAIL").inputfit({minSize:18,maxSize:!1}),$("document").ready(function(){return $("#term-detail button[data-action=share]").on("click",function(){return ga("send","event","icon-button","click","share button")}),$("#term-detail #cc-by-download").on("click",function(){return ga("send","event","text-link","click","download and attribute link")}),$(".copy-attribution-to-clipboard").on("click",function(){return ga("send","event","icon-button","click","copy attribution to clipboard")}),$(".ui_personal a").on("click",function(){return ga("send","event","text-link","click","header hover nav")}),$(".download-options .upgrade .consume").on("click",function(){return ga("send","event","button","click","recommended upgrade button on download option modal")}),$(".download-options .buy-now .purchase").on("click",function(){return ga("send","event","button","click","buy it now button on download option modal")}),$(".download-options .attribution .attribute").on("click",function(){return ga("send","event","button","click","download with attribution button on download modal")}),$(".featurette-collection").on("click",function(){return ga("send","event","featurette","click","featured collection in featurette")}),$(".featurette-designer").on("click",function(){return ga("send","event","featurette","click","featured designer in featurette")}),$(".press-kit-button").on("click",function(){return ga("send","event","button","click","press kit download")})}),$(document).ready(function(){return $(".icon img").on("error",function(){return C.icon_list.fallbackIcon($(this))})}),$(document).bind("keydown",function(a){var b,c,d,e,f;switch(d=37,f=38,e=39,b=40,c=27,a.keyCode){case c:return C.modal.dismiss()}}),$("body").on("click","#kit-container",function(a){return a.stopPropagation()}),$("body").on("click",".new-custom-name",function(a){return a.stopPropagation()}),"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),$.fn.serializeObject=function(){var a,b;return b={},a=this.serializeArray(),$.each(a,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},$("body").on("click","a.kit",function(a){var b,c,d;return a.preventDefault(),C.is_authenticed===!0?(v(),a.stopPropagation(),$("html").one("click",function(){return v()}),b=$(this),b.hasClass("ajaxing")||(b.addClass("ajaxing"),b.removeClass("ui_kit").addClass("ui_kit-open"),c=b.closest(".container"),c.addClass("kit-open"),$("body").addClass("kit-open"),d=c.find(".kit-container"),d.addClass("visible"),d.append(C.loading_markup),$.ajax({url:"/kit/retrieve/",method:"GET",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val(),username:$(".user-permalink").data("username"),icon_id:b.attr("data-icon-id")},success:function(a){var c,e,f;return b.removeClass("ajaxing"),d.find("form").length<=0?(d.append(a),$(".get-more-kits a").on("click",function(a){return a.preventDefault(),x()}),$("#term-detail").length>0&&$(".kits_list").append($(".popup-kits-list")),d.find(".loading").remove(),d.find('input[type="search"]').focus(),$(".kit-name a").click(function(a){var b;return a.preventDefault(),$(this).addClass("match"),$(".popup-kits-list").css({border:"none"}),$(this).toggleClass("added ui_kit"),b=$(this).parent("li"),b.addClass("keeper"),$(".kit-name:not(.keeper)").remove(),d.find("input").remove(),d.find(".get-more-kits").remove(),d.find(".make-a-new-kit").remove(),d.find(".ui_search").remove(),$("a.kit").addClass("added"),$.ajax({url:a.target.href,method:"POST",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){"0";return setTimeout(function(){return v(),"0"},500)},error:function(){return"0"}})}),e=d.find('input[type="search"]'),c=d.find("span.message"),$(".make-a-new-kit").click(function(a){return a.preventDefault(),f(a,e.val())}),$("body").on("keyup",d,function(a){var c,g,h;if(h=$(e).val().toLowerCase(),13===a.keyCode){if(a.preventDefault(),1===$(".match").length)return c=$(".match").children("a")[0],$(c).hasClass("added")?v():$(c).click();if("True"===$("input[name='can_create_kits']").val())return f(a,e.val())}else if(g=d.find(".kit-name").length,d.find(".kit-name").each(function(){var a,c;return b=$(this),a=b.text().toLowerCase(),c=new RegExp(h),a.match(c)?(b.removeClass("not-a-match"),a.trim()===h.trim()||$(".not-a-match").length===g-1?b.addClass("match"):b.removeClass("match")):(b.addClass("not-a-match"),b.removeClass("match"))}),0===h.length)return b.removeClass("match")}),f=function(a,b){return a.preventDefault(),d.find("input[name=new-kit-name]").val(b),d.find(".kits_list").removeClass("visible"),d.find(".new_kit").addClass("visible"),d.find("textarea[name=new-kit-description]").focus(),d.find("form").submit(function(a){var b,e,f,g,h,i,j;return a.preventDefault(),g=d.find("input[name=new-kit-name]").val(),b=d.find("textarea[name=new-kit-description]").val(),i=d.find("select[name=new-kit-owner]").val(),f=null!=(j=$("input[name=new-kit-is_public]").prop("checked"))?j:{on:"off"},e=d.find("input[name=icon-id]").val(),$.ajax({url:"/kit/new/",method:"POST",dataType:"json",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val(),name:g,description:b,owner_id:i,icon_id:e,is_public:f,popup:!0},success:function(a){var b;return a.errors?h(a.errors.name[0]):(b=$(".kit-name:first-child"),b.addClass("keeper").removeClass("not-a-match"),b.find("a").text($("input[name=new-kit-name]").val()).addClass("added ui_kit"),b.appendTo(d),d.find("form").hide(),$("a.kit").addClass("added"),v())},error:function(a){"0";return h(a.responseJSON.description)}},h=function(a){return c.slideDown(500),c.text(a),c.addClass("ui_important"),setTimeout(function(){return c.slideUp(500)},2e3)})})}):void 0},error:function(){return d.html("<p>Couldn't get your kits. Try again.</p>"),setTimeout(function(){return v()},2e3)}})),$(".kit-container").click(function(){return event.stopPropagation()})):location.href="//"+C.url_to_array[2]+"/accounts/login/?next="+location.pathname}),v=function(){var a;return a=$(".kit-container.visible"),a.length>0?(a.removeClass("visible"),$("body").removeClass("kit-open"),$(".container.kit-open").removeClass("kit-open"),$("a.kit").addClass("ui_kit").removeClass("ui_kit-open","ajaxing"),setTimeout(function(){return a.find("form").remove(),a.find("li").remove()},500)):void 0},$(".create-new-kit").on("click",function(a){return a.preventDefault(),$(this).hide(),$("form#create-new-kit span.message").hide(),$("form#create-new-kit").addClass("visible")}),t=function(){return $(".card a.card-information").on("click",function(a){var b;return a.preventDefault(),b=$(this).parents(".card"),b.find("form.edit-kit-form").hide(),b.find(".delete-confirmation").hide(),b.find(".description").show(),b.toggleClass("flip")}),$(".card a.edit-kit-info").on("click",function(a){var b,c;return a.preventDefault(),c=$(this).parents(".card"),c.toggleClass("flip"),c.find(".description").hide(),c.find(".delete-confirmation").hide(),c.find("form").show(),b=c.find(".deny-edit-kit"),b.click(function(a){return a.preventDefault(),$(this).removeClass("loading"),c.removeClass("flip"),setTimeout(function(){return c.find("form.edit-kit-form").hide(),c.find(".description").show()},500)})}),$("footer a.delete-kit").on("click",function(a){var b,c,d;return a.preventDefault(),d=$(this).parents(".card"),d.addClass("flip"),d.find(".delete-confirmation").show(),d.find(".description").hide(),b=d.find(".confirm-delete-kit"),c=d.find(".deny-delete-kit"),b.click(function(){return a.preventDefault,$.ajax({url:a.target.href,method:"POST",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){"0";return y(d)},error:function(){"0";return $(this).removeClass("loading")}})}),c.click(function(){return $(this).removeClass("loading"),d.removeClass("flip"),d.find(".delete-confirmation").hide(),d.find(".description").show()})}),$("footer a.publicize-kit").on("click",function(a){var b;return a.preventDefault(),b=this,$(this).addClass("loading"),$.ajax({url:a.target.href,method:"POST",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){"0";return I(b)},error:function(){"0";return $(b).removeClass("loading")}})}),$("footer a.lock-kit").on("click",function(a){var b;return a.preventDefault(),b=this,$(this).addClass("loading"),$.ajax({url:a.target.href,method:"POST",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){"0";return H(b)},error:function(){"0";return $(b).removeClass("loading")}})})},t(),$(".term .ui_pencil").on("click",function(a){var b,c;return a.preventDefault(),b=$(this),a.stopPropagation(),$("html").one("click",function(){return u(b)}),c=b.parents("footer"),c.find(".term").hide(),c.find("form").show(),c.find("input").focus()}),u=function(a){var b,c;return b=a,c=b.parents("footer"),c.find(".term").show(),c.find("form").hide()},$("form.new-custom-name").on("submit",function(a){var b,c,d;return a.preventDefault(),d=$(this).serializeObject(),b=$(this),c=b.find("button"),c.removeClass("ui_save"),c.addClass("loading"),$.ajax({url:a.target.action,method:"POST",data:d,success:function(a){"0";return c.removeClass("loading"),c.addClass("ui_save"),b.hide(),b.parent().find(".term").show(),b.parent().find(".term small.term-name").removeClass("hidden"),b.parent().find(".kiticon-name").text(a)},error:function(){return"0"}})}),$("form#create-new-kit").on("submit",function(a){var b,c,d,e,f;return a.preventDefault(),d=$(this).serializeObject(),c=$(this),b=c.find("button"),b.addClass("loading"),e=c.parent().find("span.message"),f=function(a){return e.slideDown(500),e.text(a),e.addClass("ui_important"),setTimeout(function(){return e.slideUp(500)},2e3)},$.ajax({url:a.target.action,method:"POST",data:d,success:function(a){return a.errors?f(a.errors.name[0]):(b.removeClass("loading"),c.removeClass("visible"),c[0].reset(),$(a).insertBefore($("#new-kit-card")),$(".create-new-kit").show(),t())}})}),$("a.delete-icon").on("click",function(a){var b;return a.preventDefault(),$(this).addClass("loading"),b=this,$.ajax({url:a.target.href,method:"POST",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){"0";return $(b).removeClass("loading"),$(b).parent().addClass("deleting"),$(b).parent().hide(500),setTimeout(function(){return $(b).parent().remove()},500)},error:function(){return"0"}})}),$("form.edit-kit-form").on("submit",function(a){var b,c,d,e;return a.preventDefault(),d=$(this).serializeObject(),b=$(this),e=$(this).parents(".card"),c=b.find("button.confirm-edit-kit"),c.addClass("loading"),$.ajax({url:a.target.action,method:"POST",data:d,success:function(a){var d;return c.removeClass("loading"),e.removeClass("flip"),e.find(".description").text(a.description).show(),d=a.name.length>20?a.name.substring(0,20)+"…":a.name,e.find(".front span.name").text(d).attr("title",a.name),b.hide()},error:function(){return"0"}})}),$("#new-kit-card .get-more-kits").on("click",function(a){return a.preventDefault(),x()}),y=function(a){return $(a).hide(500,function(){return $(a).remove()})},H=function(a){return $(a).removeClass("loading"),$(a).toggleClass("ui_lock"),$(a).toggleClass("ui_unlock"),$(a).hasClass("ui_lock")?$(a).attr("title","Locked"):$(a).attr("title","Unlocked")},I=function(a){return $(a).removeClass("loading"),$(a).toggleClass("ui_eye"),$(a).toggleClass("ui_eye-copy"),$(a).hasClass("ui_eye")?($(a).attr("title","Public"),$(a).siblings(".share").removeClass("hide")):($(a).attr("title","Private"),$(a).siblings(".share").addClass("hide"))},x=function(){var a,b,c;return a={type:"upsell",style:"full-black",authenticate:!1},c=function(){return $(".close-button").on("click",function(a){return a.preventDefault(),C.modal.dismiss()}),$(".keep-downloading").on("click",function(a){return a.preventDefault(),C.modal.dismiss()})},b=function(){var b,d,e;return b=C.modal.init(a,$("body"),"auto-initialize",e=c,d=!1)},b(),$("#upgrade-for-kits").removeClass("hidden")},$("#logout-button").click(function(a){return a.preventDefault(),$("#logout-form").submit()}),C.is_authenticed===!0&&(J="//"+C.url_to_array[2]+"/notifications/",e=$("#notifications-list"),k=$("#toggle-notification-view"),F=0,q=function(){function a(a){var b,c;b=this,c=this.notifications_element,$.get(a,function(a){return/^\s*$/.test(a)===!1&&$("#no-notifications").remove(),c.prepend(a),void 0!==b.on_finish?b.on_finish():void 0})}return a.prototype.notifications_element=$("#notifications-list"),a.prototype.on_finish=void 0,a}(),B=new q(J),B.on_finish=function(){return $("html").on("click",function(){return $("#header").hasClass("drawer-open")?F=1:void 0}),$("#user-account-drop-down .ui_close").on("click",function(){return $("#header").hasClass("drawer-open")?F=1:void 0}),$("#toggle-notification-view").on("click",function(a){return a.preventDefault(),$(this).removeClass("has_notification"),$.get("//"+C.url_to_array[2]+"/clear-notications/",function(){return"0"}),$("#header:not(.drawer-open)").length>0?0===F?(e.removeClass("hidden"),k.addClass("active"),F=1):(e.addClass("hidden"),k.removeClass("active"),F=0):void 0})},$(".user-permalink").on("click",function(a){return a.preventDefault(),k.hasClass("active")?(k.removeClass("active"),e.addClass("hidden")):void 0})),g=$("#organization-drawer"),f=$("#user-account-drop-down .ui_close"),c=$("#header"),d=$("#language-drawer"),$(".language.drop-link").on("click",function(a){return a.preventDefault(),d.hasClass("active")?(d.removeClass("active"),c.removeClass("drawer-open")):(d.addClass("active"),c.addClass("drawer-open"))}),$(".user-permalink").on("click",function(a){return a.preventDefault(),g.hasClass("active")?(g.removeClass("active"),c.parent(".sticky-wrapper").height(42),f.removeClass("active"),c.removeClass("drawer-open")):(c.parent(".sticky-wrapper").height("inherit"),g.addClass("active"),f.addClass("active"),c.addClass("drawer-open"))}),f.on("click",function(a){return a.preventDefault(),g.removeClass("active"),c.parent(".sticky-wrapper").height(42),f.removeClass("active"),c.removeClass("drawer-open")}),$("html").on("click",function(){return c.hasClass("drawer-open")?($(".drawer-open").find(".drawer.active").removeClass("active"),f.removeClass("active"),c.parent(".sticky-wrapper").height(42),c.removeClass("drawer-open"),"0"):void 0}),c.on("click",function(a){return c.hasClass("drawer-open")?(a.stopPropagation(),"0"):void 0}),g.on("click",".organization-name>a",function(a){var b,c,d;return a.preventDefault(),c=$(this),d=c.html(),b=$(".user-permalink"),b.html(d),G(c),$.ajax({url:$("#select-organization-form").attr("action"),method:"POST",data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val(),user_id:c.data("user-id")}})}),G=function(a){var b,c,d,e,f;return $(".org-context-navigation.active").removeClass("active"),e=$(".current-organization"),e.removeClass("current-organization"),f="true"===a.attr("data-is-shadow-org")?$(".user-context-navigation").attr("data-organization-user-id"):a.attr("data-user-id"),d=$('.org-context-navigation[data-organization-user-id="'+f+'"]'),d.addClass("active"),a=a.parent().parent("li"),a.addClass("current-organization"),b=a.find(".licenses-available").text(),c=a.find(".licenses-available").attr("data-licenses-available"),$("#licenses-available").text(b),$("#licenses-available").attr("data-licenses-available",c),$("#premium-download").attr("data-licenses-available",c),$("#premium-download .count").text(c),parseInt(c)>0?$("body").attr("data-can-consume","true"):$("body").attr("data-can-consume","false"),$("#term-detail").length>0?C.updateActions:void 0},r=function(){function a(){var a;a=a||[]}var b,c,d;return d={},c={},b={},a.prototype.updateContext=function(a){return this.context=a?a:$(".active")},a.prototype.showContext=function(){return"0"},a.prototype.showUser=function(){return this.person},a.prototype.setPerson=function(a){return a?this.person={uid:a}:void 0},a.prototype.setAnonymousPerson=function(){return{name:"Anonymous",uid:"anonymous"}},a.prototype.preactLogEvent=function(a){"0";return this.person&&(_lnq.push(["_setCode","mtb37nbcli"]),_lnq.push(["_setPersonData",this.person]),_lnq.push(["_logEvent",this.event]),a)?a():void 0},a.prototype.preactViewIconEvent=function(){"0";return this.event={name:"view:icon",target_id:this.context.attr("data-id"),note:this.context.data("primary-term")},this.preactLogEvent()},a.prototype.preactShareEvent=function(a){return this.context||this.updateContext(),this.event={name:"share:icon",note:a,target_id:this.context.attr("data-id"),extras:{term:this.context.attr("data-primary-term")}},this.person||(this.person=this.setAnonymousPerson()),this.preactLogEvent()},a.prototype.preactDeactivateAccountEvent=function(a){return this.event={name:"deactivate:account",note:new Date+""},this.preactLogEvent(a)},a.prototype.preactLoveYouClickEvent=function(){return this.event={name:"love:you",note:"Love You"},this.preactLogEvent()},a.prototype.preactAuthDropDownUpgradeClick=function(a){return this.event={name:"click:upgrade-dropdown",note:a},this.preactLogEvent()},a.prototype.preactErrorPage=function(a){return this.event={name:"error:page",note:a},this.preactLogEvent()},a.prototype.preactUpsellModal=function(a){return this.event={name:"upsell:modal",note:a},this.preactLogEvent()},a.prototype.preactNoSearchResults=function(a){return this.event={name:"search:noresults",note:a},this.preactLogEvent()},a}(),C.preact=new r,$(document).ready(function(){return C.preact.setPerson($("a.user-permalink").data("username"))}),$("ul.upgrade-plans li").each(function(){return $(this).click(function(a){var b;return a.preventDefault(),b=$(this).find("span.plan-name").text(),C.preact.preactAuthDropDownUpgradeClick(b),location.href=a.currentTarget.firstElementChild.href})}),$(document).ready(function(){var a;return a=$("body").attr("id"),"error-403"===a||"error-404"===a||"error-500"===a?C.preact.preactErrorPage(a):void 0}),w=C.url_to_array,J=w[2],D=w[4],E=w[5],h=$("#search"),i=h.find("#search-input"),a=$("#autocomplete"),A=!1,l={endpoint:"/json_icon_list/autocomplete/?term=",suggestionTemplate:Handlebars.compile('<li class="suggestion"><a href="/search/?q={{suggestion}}">{{suggestion}}</a></li>'),$suggestionsList:$(".autocomplete"),maxSuggestions:4,lastCharacters:0,init:function(){return this.trackExternalClicks(),this.watchKeyStrokes(),"0"},watchKeyStrokes:function(){var a;return a=this,i.on("keyup",function(b){var c,d;return d=38,c=40,b.keyCode!==c&&b.keyCode!==d?a.getSuggestions():void 0}),this.lastCharacters=i.val().length,"0"},trackExternalClicks:function(){var a;return a=$.proxy(this.stopWatchingKeyStrokes,this),$("#search").on("click.tracking",function(a){return a.stopPropagation()}),$("html").one("click",function(){return a(),"0"}),"0"},stopWatchingKeyStrokes:function(){return i.off("click.tracking"),this.clearAutocomplete(),"0"},minimumLength:function(a){return a.length>2},getSuggestions:function(){var a;return i.addClass("focus"),A===!1?(E=i.val(),a=void 0,this.minimumLength(E)?(a=this.sendQuery(E),a.done($.proxy(this.addSuggestions,this)).fail($.proxy(this.clearAutocomplete,this))):this.lastCharacters>E.length&&this.clearAutocomplete(),this.lastCharacters=E.length):void 0},sendQuery:function(a){return $.ajax({url:this.endpoint+a,dataType:"json",type:"GET"})},addSuggestions:function(b){var c,d,e;return d=b.slice(0,this.maxSuggestions),e=this.suggestionTemplate,c=[],0===d.length?(this.clearAutocomplete(),void 0):($.each(d,function(a,b){return c.push(e({suggestion:b}))}),this.clearAutocomplete(),a.css("display","block"),this.$suggestionsList.html(c.join("")),a.addClass("autocomplete"))},clearAutocomplete:function(){return this.$suggestionsList.empty(),a.css("display","none"),a.removeClass("autocomplete"),i.removeClass("focus")}},$("document").ready(function(){var a;return"search"===D&&(a=E.replace("?q=",""),i.val(a)),i.focus(function(){var a;return A=!1,l.init(),""!==i.val()&&$("#search label[for='search-input']").on("click",function(b){return b.preventDefault(),a()}),$("#search-input").bind("keydown",function(b){var c,d,e,f,g;switch(c=$(".suggestion"),e=13,g=38,d=40,b.keyCode){case d:return A=!0,c.hasClass("active")===!1?$(c[0]).addClass("active"):(f=c.index($(".suggestion.active")),$(c[f+1]).length>0&&($(c[f]).removeClass("active"),$(c[f+1]).addClass("active"))),A=!1;case g:return A=!0,f=c.index($(".suggestion.active")),$(c[f-1]).length>0&&($(c[f]).removeClass("active"),$(c[f-1]).addClass("active")),A=!1;case e:return $(".suggestion.active a").length>0&&i.val($(".suggestion.active a").html()),a()}}),a=function(){var a;return a=i.val().trim().replace(/\s+/g,"-").toLowerCase(),w="//"+J+"/search/?q="+a,window.location.href=w}})}),$(".section-nav").length&&(j=$(".section-nav"),j.length>0&&(j.waypoint("sticky"),$("section.user-icons").waypoint(function(){var a;return a=$(this).attr("id"),$(".section-nav .current").removeClass("current"),$('.section-nav a[href="#'+a+'"]').parent("li").addClass("current")},{offset:"100px"}),$(".section-nav a").on("click",function(a){var b,c;return a.preventDefault,$(".section-nav .current").removeClass("current"),$(this).parent("li").addClass("current"),location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(c=$(this.hash),c=c.length?c:$("[name="+this.hash.slice(1)+"]"),b=c.offset().top,c.length)?($("html,body").animate({scrollTop:b-100},1e3),!1):void 0}))),$(document).ready(function(){var a,b;return $("#header").waypoint("sticky",{offset:-24}),a=$("#search").outerHeight(),b=-a,$("#search").waypoint("sticky",{offset:15}),$("#autocomplete").waypoint("sticky",{offset:40})}),s=function(){var a;return a=$(".tabbed-container"),{init:function(){"Initializes the tabs and click events";
return window.location.hash,$(".tabbed-nav a").on("click",function(a){var b,c;return a.preventDefault(),b=$(this).attr("href"),c=$(this).parents(".tab"),C.tabbed_sections.switch_tab(c,b)}),"0"},switch_tab:function(b,c){"# If click on tab, bring up corresponding section";var d;return $(".tabbed-nav .tab").removeClass("active"),b.addClass("animating"),a.addClass("animating"),$(".tabbed-section").removeClass("visible-tab").addClass("hidden-tab"),clearTimeout(d),d=setTimeout(function(){return a.removeClass("animating"),$(".tabbed-section").removeClass("visible-tab").addClass("hidden-tab"),$(".tabbed-nav .tab").removeClass("active"),b.removeClass("animating").addClass("active"),$(c).removeClass("hidden-tab").addClass("visible-tab"),"#brief"===c?($("#upload-button").addClass("on-brief").removeClass("bottom stuck"),$(".key-requirements").addClass("on-brief").removeClass("bottom stuck"),C.activate_bottom()):$("#upload-button").removeClass("on-brief")},350)}}},C.tabbed_sections=s(),C.tabbed_sections.init(),Handlebars.registerHelper("ifvalue",function(a,b){return b.hash.value===a?b.fn(this):b.inverse(this)})}).call(this);